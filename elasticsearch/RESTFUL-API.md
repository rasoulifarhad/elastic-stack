### RESTFUL API

```markdown
\[VERB\]  /{index}/{type}/{id}?pretty

GET | POST | PUT | DELETE | HEAD
```

Adding **pretty** to the query-string parameters pretty-prints the response

#### Index document with id

```markdown
PUT /{index}/_doc/{id}
```

Example: 

```markdown
cat users.json <<EOF
{
  "firstName": "farhad",
  "lastName": "rasouli"
}
EOF
```

```markdown
curl -X PUT localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json' -d @users.json
```

OR

```markdown
curl -X PUT localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json' -d'
{ 
  "firstName": "farhad",
  "lastName": "rasouli"
}
'
```

Response:

```markdown
{
  "_index" : "users",
  "_type" : "_doc",
  "_id" : "123",
  "_version" : 1,
  "result" : "created",
  "_shards" : {
    "total" : 2,
    "successful" : 1,
    "failed" : 0
  },
  "_seq_no" : 0,
  "_primary_term" : 1
}
```

#### Index document with autogenerated id

```markdown
POST /{index}/_doc
```

**Note:** Autogenerated IDs are **Base64**-encoded **UUIDs**

Example: 

```markdown
cat users.json <<EOF
{
  "firstName": "name",
  "lastName": "family"
}
EOF
```

```markdown
curl -X POST localhost:9200/users/_doc?pretty -H 'Content-Type: application/json' -d @users.json
```

OR

```markdown
curl -X POST localhost:9200/users/_doc?pretty -H 'Content-Type: application/json' -d'
{
  "firstName": "name",
  "lastName": "family"
}
'
```

Response: 

```markdown
{
  "_index" : "users",
  "_type" : "_doc",
  "_id" : "GbzThYcBkRjDje6ZZKHD",
  "_version" : 1,
  "result" : "created",
  "_shards" : {
    "total" : 2,
    "successful" : 1,
    "failed" : 0
  },
  "_seq_no" : 1,
  "_primary_term" : 1
}
```

#### Retrieving a document

```markdown
GET /{index}/_doc/{id}
```

Example:

```markdown
curl -X GET localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json'
```

Response: 

```markdown
{
  "_index" : "users",
  "_type" : "_doc",
  "_id" : "123",
  "_version" : 1,
  "_seq_no" : 0,
  "_primary_term" : 1,
  "found" : true,
  "_source" : {
    "firstName" : "farhad",
    "lastName" : "rasouli"
  }
}
```

#### Retrieving a document without metadata

```markdown
GET /{index}/_doc/{id}/_source
```

Example:

```markdown
curl -X GET localhost:9200/users/_doc/123/_source?pretty -H 'Content-Type: application/json'
```

Response: 

```markdown
{
  "firstName" : "farhad",
  "lastName" : "rasouli"
}
```

#### Retrieving part of a document

```markdown
GET /{index}/_doc/{id}?_source={fields}
```

Example:

```markdown
curl -X GET 'localhost:9200/users/_doc/123?_source=firstName&pretty' -H 'Content-Type: application/json'
```

Response:
 
```markdown
{
  "_index" : "users",
  "_type" : "_doc",
  "_id" : "123",
  "_version" : 1,
  "_seq_no" : 0,
  "_primary_term" : 1,
  "found" : true,
  "_source" : {
    "firstName" : "farhad"
  }
}
```

```markdown
curl -X GET 'localhost:9200/users/_doc/123?_source=firstName,lastName&pretty' -H 'Content-Type: application/json'
```

Response:
 
```markdown
{
  "_index" : "users",
  "_type" : "_doc",
  "_id" : "123",
  "_version" : 1,
  "_seq_no" : 0,
  "_primary_term" : 1,
  "found" : true,
  "_source" : {
    "firstName" : "farhad",
    "lastName" : "rasouli"
  }
}
```

#### Check existence of a document

```markdown
HEAD /{index}/_doc/{id}
```

Example:

```markdown
curl -I 'localhost:9200/users/_doc/123' -H 'Content-Type: application/json'
```

Response:

```markdown
HTTP/1.1 200 OK
X-elastic-product: Elasticsearch
content-type: application/json; charset=UTF-8
content-length: 161
```

```markdown
curl -I 'localhost:9200/users/_doc/321' -H 'Content-Type: application/json'
```

Response:

```markdown
HTTP/1.1 404 Not Found
X-elastic-product: Elasticsearch
content-type: application/json; charset=UTF-8
content-length: 59
```

#### Update whole document

```markdown
PUT /{index}/_doc/{id}
```

Example:

```markdown
cat updated-user.json <<EOF
{
  "firstName" : "updated-farhad",
  "lastName" : "updated-rasouli"
}
EOF
```

```markdown
curl -X PUT localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json' -d @updated-user.json
```

OR

```markdown
curl -X PUT localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json' -d'
{
  "firstName" : "updated-farhad",
  "lastName" : "updated-rasouli"
}
'
```

Response: 

```markdown
{
  "_index" : "users",
  "_type" : "_doc",
  "_id" : "123",
  "_version" : 2,
  "result" : "updated",
  "_shards" : {
    "total" : 2,
    "successful" : 1,
    "failed" : 0
  },
  "_seq_no" : 2,
  "_primary_term" : 1
}
```

```markdown
curl -X GET localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json'
```

Response:

```markdown
{
  "_index" : "users",
  "_type" : "_doc",
  "_id" : "123",
  "_version" : 2,
  "_seq_no" : 2,
  "_primary_term" : 1,
  "found" : true,
  "_source" : {
    "firstName" : "updated-farhad",
    "lastName" : "updated-rasouli"
  }
}
```

#### Delete a document

```markdown
DELETE /{index}/_doc/{id}
```

Example:

```markdown
curl -X DELETE localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json'
```

Response:

```markdown
{
  "_index" : "users",
  "_type" : "_doc",
  "_id" : "123",
  "_version" : 3,
  "result" : "deleted",
  "_shards" : {
    "total" : 2,
    "successful" : 1,
    "failed" : 0
  },
  "_seq_no" : 3,
  "_primary_term" : 1
}
```

