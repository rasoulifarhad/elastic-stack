### RESTFUL API

> \[VERB\]  /{index}/{type}/{id}?pretty
>
> GET | POST | PUT | DELETE | HEAD

Adding **pretty** to the query-string parameters pretty-prints the response

#### Index document with id

> PUT /{index}/_doc/{id}

Example: 

> cat > users.json <<EOF
> {
>   "firstName": "farhad",
>   "lastName": "rasouli"
> }
> EOF

> curl -X PUT localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json' -d @users.json
>
> OR
> 
> curl -X PUT localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json' -d'
> { 
>   "firstName": "farhad",
>   "lastName": "rasouli"
> }
> '

Response:

> {
>   "_index" : "users",
>   "_type" : "_doc",
>   "_id" : "123",
>   "_version" : 1,
>   "result" : "created",
>   "_shards" : {
>     "total" : 2,
>     "successful" : 1,
>     "failed" : 0
>   },
>   "_seq_no" : 0,
>   "_primary_term" : 1
> }

#### Index document with autogenerated id

> POST /{index}/_doc

**Note:** Autogenerated IDs are **Base64**-encoded **UUIDs**

Example: 

> cat > users.json <<EOF
> {
>   "firstName": "name",
>   "lastName": "family"
> }
> EOF

> curl -X POST localhost:9200/users/_doc?pretty -H 'Content-Type: application/json' -d @users.json
>
> OR
> 
> curl -X POST localhost:9200/users/_doc?pretty -H 'Content-Type: application/json' -d'
> {
>   "firstName": "name",
>   "lastName": "family"
> }
> '

Response: 

> {
>   "_index" : "users",
>   "_type" : "_doc",
>   "_id" : "GbzThYcBkRjDje6ZZKHD",
>   "_version" : 1,
>   "result" : "created",
>   "_shards" : {
>     "total" : 2,
>     "successful" : 1,
>     "failed" : 0
>   },
>   "_seq_no" : 1,
>   "_primary_term" : 1
> }

#### Retrieving a document

> GET /{index}/_doc/{id}

Example:

> curl -X GET localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json'

Response: 

> {
>   "_index" : "users",
>   "_type" : "_doc",
>   "_id" : "123",
>   "_version" : 1,
>   "_seq_no" : 0,
>   "_primary_term" : 1,
>   "found" : true,
>   "_source" : {
>     "firstName" : "farhad",
>     "lastName" : "rasouli"
>   }
> }

#### Retrieving a document without metadata

> GET /{index}/_doc/{id}/_source

Example:

> curl -X GET localhost:9200/users/_doc/123/_source?pretty -H 'Content-Type: application/json'

Response: 

> {
>   "firstName" : "farhad",
>   "lastName" : "rasouli"
> }

#### Retrieving part of a document

> GET /{index}/_doc/{id}?_source={fields}

Example:

> curl -X GET 'localhost:9200/users/_doc/123?_source=firstName&pretty' -H 'Content-Type: application/json'

Response: 

> {
>   "_index" : "users",
>   "_type" : "_doc",
>   "_id" : "123",
>   "_version" : 1,
>   "_seq_no" : 0,
>   "_primary_term" : 1,
>   "found" : true,
>   "_source" : {
>     "firstName" : "farhad"
>   }
> }

> curl -X GET 'localhost:9200/users/_doc/123?_source=firstName,lastName&pretty' -H 'Content-Type: application/json'

Response: 

> {
>   "_index" : "users",
>   "_type" : "_doc",
>   "_id" : "123",
>   "_version" : 1,
>   "_seq_no" : 0,
>   "_primary_term" : 1,
>   "found" : true,
>   "_source" : {
>     "firstName" : "farhad",
>     "lastName" : "rasouli"
>   }
> }

#### Check existence of a document

> HEAD /{index}/_doc/{id}

Example:

> curl -I 'localhost:9200/users/_doc/123' -H 'Content-Type: application/json'

Response:

> HTTP/1.1 200 OK
> X-elastic-product: Elasticsearch
> content-type: application/json; charset=UTF-8
> content-length: 161

> curl -I 'localhost:9200/users/_doc/321' -H 'Content-Type: application/json'

Response:

> HTTP/1.1 404 Not Found
> X-elastic-product: Elasticsearch
> content-type: application/json; charset=UTF-8
> content-length: 59

#### Update whole document

> PUT /{index}/_doc/{id}

Example:

> cat > updated-user.json <<EOF
> {
>   "firstName" : "updated-farhad",
>   "lastName" : "updated-rasouli"
> }
> EOF

> curl -X PUT localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json' -d @updated-user.json
> 
> OR
> 
> curl -X PUT localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json' -d'
> {
>   "firstName" : "updated-farhad",
>   "lastName" : "updated-rasouli"
> }
> '

Response: 

> {
>   "_index" : "users",
>   "_type" : "_doc",
>   "_id" : "123",
>   "_version" : 2,
>   "result" : "updated",
>   "_shards" : {
>     "total" : 2,
>     "successful" : 1,
>     "failed" : 0
>   },
>   "_seq_no" : 2,
>   "_primary_term" : 1
> }

> curl -X GET localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json'

Response:

> {
>   "_index" : "users",
>   "_type" : "_doc",
>   "_id" : "123",
>   "_version" : 2,
>   "_seq_no" : 2,
>   "_primary_term" : 1,
>   "found" : true,
>   "_source" : {
>     "firstName" : "updated-farhad",
>     "lastName" : "updated-rasouli"
>   }
> }

#### Delete a document

> DELETE /{index}/_doc/{id}

Example:

> curl -X DELETE localhost:9200/users/_doc/123?pretty -H 'Content-Type: application/json'

Response:

> {
>   "_index" : "users",
>   "_type" : "_doc",
>   "_id" : "123",
>   "_version" : 3,
>   "result" : "deleted",
>   "_shards" : {
>     "total" : 2,
>     "successful" : 1,
>     "failed" : 0
>   },
>   "_seq_no" : 3,
>   "_primary_term" : 1
> }

